import exposesMap from"./virtualExposes-BIHI7g3E.js";var index_cjs$1={},polyfills_cjs$1={};function _extends$1(){return _extends$1=Object.assign||function(r){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(r[l]=n[l])}return r},_extends$1.apply(this,arguments)}function _object_without_properties_loose(e,r){if(e==null)return{};var i={},n=Object.keys(e),l,p;for(p=0;p<n.length;p++)l=n[p],!(r.indexOf(l)>=0)&&(i[l]=e[l]);return i}polyfills_cjs$1._extends=_extends$1;polyfills_cjs$1._object_without_properties_loose=_object_without_properties_loose;var index_cjs={},polyfills_cjs={};function _extends(){return _extends=Object.assign||function(r){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(r[l]=n[l])}return r},_extends.apply(this,arguments)}polyfills_cjs._extends=_extends;var define_process_env_default={},polyfills$1=polyfills_cjs;const FederationModuleManifest="federation-manifest.json",MANIFEST_EXT=".json",BROWSER_LOG_KEY="FEDERATION_DEBUG",BROWSER_LOG_VALUE="1",NameTransformSymbol={AT:"@",HYPHEN:"-",SLASH:"/"},NameTransformMap={[NameTransformSymbol.AT]:"scope_",[NameTransformSymbol.HYPHEN]:"_",[NameTransformSymbol.SLASH]:"__"},EncodedNameTransformMap={[NameTransformMap[NameTransformSymbol.AT]]:NameTransformSymbol.AT,[NameTransformMap[NameTransformSymbol.HYPHEN]]:NameTransformSymbol.HYPHEN,[NameTransformMap[NameTransformSymbol.SLASH]]:NameTransformSymbol.SLASH},SEPARATOR=":",ManifestFileName="mf-manifest.json",StatsFileName="mf-stats.json",MFModuleType={NPM:"npm",APP:"app"},MODULE_DEVTOOL_IDENTIFIER="__MF_DEVTOOLS_MODULE_INFO__",ENCODE_NAME_PREFIX="ENCODE_NAME_PREFIX",TEMP_DIR=".federation",MFPrefetchCommon={identifier:"MFDataPrefetch",globalKey:"__PREFETCH__",library:"mf-data-prefetch",exportsKey:"__PREFETCH_EXPORTS__",fileName:"bootstrap.js"};var ContainerPlugin=Object.freeze({__proto__:null}),ContainerReferencePlugin=Object.freeze({__proto__:null}),ModuleFederationPlugin=Object.freeze({__proto__:null}),SharePlugin=Object.freeze({__proto__:null});function isBrowserEnv(){return typeof window<"u"}function isDebugMode(){return typeof process<"u"&&define_process_env_default&&define_process_env_default.FEDERATION_DEBUG?!!define_process_env_default.FEDERATION_DEBUG:typeof FEDERATION_DEBUG<"u"&&!!FEDERATION_DEBUG}const getProcessEnv=function(){return typeof process<"u"&&define_process_env_default?define_process_env_default:{}},DEBUG_LOG="[ FEDERATION DEBUG ]";function safeToString$1(e){try{return JSON.stringify(e,null,2)}catch{return""}}function safeGetLocalStorageItem(){try{if(typeof window<"u"&&window.localStorage)return localStorage.getItem(BROWSER_LOG_KEY)===BROWSER_LOG_VALUE}catch{return typeof document<"u"}return!1}let Logger=class{info(r,i){if(this.enable){const n=safeToString$1(i)||"";isBrowserEnv()?console.info(`%c ${this.identifier}: ${r} ${n}`,"color:#3300CC"):console.info("\x1B[34m%s",`${this.identifier}: ${r} ${n?`
${n}`:""}`)}}logOriginalInfo(...r){this.enable&&(isBrowserEnv()?(console.info(`%c ${this.identifier}: OriginalInfo`,"color:#3300CC"),console.log(...r)):(console.info(`%c ${this.identifier}: OriginalInfo`,"color:#3300CC"),console.log(...r)))}constructor(r){this.enable=!1,this.identifier=r||DEBUG_LOG,isBrowserEnv()&&safeGetLocalStorageItem()?this.enable=!0:isDebugMode()&&(this.enable=!0)}};const LOG_CATEGORY$1="[ Federation Runtime ]",parseEntry=(e,r,i=SEPARATOR)=>{const n=e.split(i),l=getProcessEnv().NODE_ENV==="development"&&r,p="*",m=_=>_.startsWith("http")||_.includes(MANIFEST_EXT);if(n.length>=2){let[_,...E]=n;e.startsWith(i)&&(E=[l||n.slice(-1)[0]],_=n.slice(0,-1).join(i));let b=l||E.join(i);return m(b)?{name:_,entry:b}:{name:_,version:b||p}}else if(n.length===1){const[_]=n;return l&&m(l)?{name:_,entry:l}:{name:_,version:l||p}}else throw`Invalid entry value: ${e}`},logger=new Logger,composeKeyWithSeparator=function(...e){return e.length?e.reduce((r,i)=>i?r?`${r}${SEPARATOR}${i}`:i:r,""):""},encodeName=function(e,r="",i=!1){try{const n=i?".js":"";return`${r}${e.replace(new RegExp(`${NameTransformSymbol.AT}`,"g"),NameTransformMap[NameTransformSymbol.AT]).replace(new RegExp(`${NameTransformSymbol.HYPHEN}`,"g"),NameTransformMap[NameTransformSymbol.HYPHEN]).replace(new RegExp(`${NameTransformSymbol.SLASH}`,"g"),NameTransformMap[NameTransformSymbol.SLASH])}${n}`}catch(n){throw n}},decodeName=function(e,r,i){try{let n=e;if(r){if(!n.startsWith(r))return n;n=n.replace(new RegExp(r,"g"),"")}return n=n.replace(new RegExp(`${NameTransformMap[NameTransformSymbol.AT]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.AT]]).replace(new RegExp(`${NameTransformMap[NameTransformSymbol.SLASH]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.SLASH]]).replace(new RegExp(`${NameTransformMap[NameTransformSymbol.HYPHEN]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.HYPHEN]]),i&&(n=n.replace(".js","")),n}catch(n){throw n}},generateExposeFilename=(e,r)=>{if(!e)return"";let i=e;return i==="."&&(i="default_export"),i.startsWith("./")&&(i=i.replace("./","")),encodeName(i,"__federation_expose_",r)},generateShareFilename=(e,r)=>e?encodeName(e,"__federation_shared_",r):"",getResourceUrl=(e,r)=>{if("getPublicPath"in e){let i;return e.getPublicPath.startsWith("function")?i=new Function("return "+e.getPublicPath)()():i=new Function(e.getPublicPath)(),`${i}${r}`}else return"publicPath"in e?`${e.publicPath}${r}`:(console.warn("Cannot get resource URL. If in debug mode, please ignore.",e,r),"")},assert$1=(e,r)=>{e||error$1(r)},error$1=e=>{throw new Error(`${LOG_CATEGORY$1}: ${e}`)},warn$1=e=>{console.warn(`${LOG_CATEGORY$1}: ${e}`)};function safeToString(e){try{return JSON.stringify(e,null,2)}catch{return""}}const simpleJoinRemoteEntry=(e,r)=>{if(!e)return r;const n=(l=>{if(l===".")return"";if(l.startsWith("./"))return l.replace("./","");if(l.startsWith("/")){const p=l.slice(1);return p.endsWith("/")?p.slice(0,-1):p}return l})(e);return n?n.endsWith("/")?`${n}${r}`:`${n}/${r}`:r};function inferAutoPublicPath(e){return e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/")}function generateSnapshotFromManifest(e,r={}){var i,n;const{remotes:l={},overrides:p={},version:m}=r;let _;const E=()=>"publicPath"in e.metaData?e.metaData.publicPath==="auto"&&m?inferAutoPublicPath(m):e.metaData.publicPath:e.metaData.getPublicPath,b=Object.keys(p);let A={};if(!Object.keys(l).length){var O;A=((O=e.remotes)==null?void 0:O.reduce((P,J)=>{let Q;const ee=J.federationContainerName;return b.includes(ee)?Q=p[ee]:"version"in J?Q=J.version:Q=J.entry,P[ee]={matchedVersion:Q},P},{}))||{}}Object.keys(l).forEach(P=>A[P]={matchedVersion:b.includes(P)?p[P]:l[P]});const{remoteEntry:{path:N,name:k,type:z},types:G,buildInfo:{buildVersion:D},globalName:H,ssrRemoteEntry:X}=e.metaData,{exposes:K}=e;let V={version:m||"",buildVersion:D,globalName:H,remoteEntry:simpleJoinRemoteEntry(N,k),remoteEntryType:z,remoteTypes:simpleJoinRemoteEntry(G.path,G.name),remoteTypesZip:G.zip||"",remoteTypesAPI:G.api||"",remotesInfo:A,shared:e==null?void 0:e.shared.map(P=>({assets:P.assets,sharedName:P.name,version:P.version})),modules:K==null?void 0:K.map(P=>({moduleName:P.name,modulePath:P.path,assets:P.assets}))};if((i=e.metaData)!=null&&i.prefetchInterface){const P=e.metaData.prefetchInterface;V=polyfills$1._extends({},V,{prefetchInterface:P})}if((n=e.metaData)!=null&&n.prefetchEntry){const{path:P,name:J,type:Q}=e.metaData.prefetchEntry;V=polyfills$1._extends({},V,{prefetchEntry:simpleJoinRemoteEntry(P,J),prefetchEntryType:Q})}if("publicPath"in e.metaData?_=polyfills$1._extends({},V,{publicPath:E()}):_=polyfills$1._extends({},V,{getPublicPath:E()}),X){const P=simpleJoinRemoteEntry(X.path,X.name);_.ssrRemoteEntry=P,_.ssrRemoteEntryType=X.type||"commonjs-module"}return _}function isManifestProvider(e){return!!("remoteEntry"in e&&e.remoteEntry.includes(MANIFEST_EXT))}async function safeWrapper(e,r){try{return await e()}catch(i){!r&&warn$1(i);return}}function isStaticResourcesEqual(e,r){const i=/^(https?:)?\/\//i,n=e.replace(i,"").replace(/\/$/,""),l=r.replace(i,"").replace(/\/$/,"");return n===l}function createScript(e){let r=null,i=!0,n=2e4,l;const p=document.getElementsByTagName("script");for(let _=0;_<p.length;_++){const E=p[_],b=E.getAttribute("src");if(b&&isStaticResourcesEqual(b,e.url)){r=E,i=!1;break}}if(!r){const _=e.attrs;r=document.createElement("script"),r.type=(_==null?void 0:_.type)==="module"?"module":"text/javascript",r.src=e.url;let E;e.createScriptHook&&(E=e.createScriptHook(e.url,e.attrs),E instanceof HTMLScriptElement?r=E:typeof E=="object"&&("script"in E&&E.script&&(r=E.script),"timeout"in E&&E.timeout&&(n=E.timeout))),_&&!E&&Object.keys(_).forEach(b=>{r&&(b==="async"||b==="defer"?r[b]=_[b]:r.getAttribute(b)||r.setAttribute(b,_[b]))})}const m=async(_,E)=>{var b;if(clearTimeout(l),r&&(r.onerror=null,r.onload=null,safeWrapper(()=>{const{needDeleteScript:N=!0}=e;N&&r!=null&&r.parentNode&&r.parentNode.removeChild(r)}),_&&typeof _=="function")){var A;const N=_(E);if(N instanceof Promise){var O;const k=await N;return e==null||(O=e.cb)==null||O.call(e),k}return e==null||(A=e.cb)==null||A.call(e),N}e==null||(b=e.cb)==null||b.call(e)};return r.onerror=m.bind(null,r.onerror),r.onload=m.bind(null,r.onload),l=setTimeout(()=>{m(null,new Error(`Remote script "${e.url}" time-outed.`))},n),{script:r,needAttach:i}}function createLink(e){let r=null,i=!0;const n=document.getElementsByTagName("link");for(let p=0;p<n.length;p++){const m=n[p],_=m.getAttribute("href"),E=m.getAttribute("ref");if(_&&isStaticResourcesEqual(_,e.url)&&E===e.attrs.ref){r=m,i=!1;break}}if(!r){r=document.createElement("link"),r.setAttribute("href",e.url);let p;const m=e.attrs;e.createLinkHook&&(p=e.createLinkHook(e.url,m),p instanceof HTMLLinkElement&&(r=p)),m&&!p&&Object.keys(m).forEach(_=>{r&&!r.getAttribute(_)&&r.setAttribute(_,m[_])})}const l=(p,m)=>{if(r&&(r.onerror=null,r.onload=null,safeWrapper(()=>{const{needDeleteLink:_=!0}=e;_&&r!=null&&r.parentNode&&r.parentNode.removeChild(r)}),p)){const _=p(m);return e.cb(),_}e.cb()};return r.onerror=l.bind(null,r.onerror),r.onload=l.bind(null,r.onload),{link:r,needAttach:i}}function loadScript(e,r){const{attrs:i={},createScriptHook:n}=r;return new Promise((l,p)=>{const{script:m,needAttach:_}=createScript({url:e,cb:l,attrs:polyfills$1._extends({fetchpriority:"high"},i),createScriptHook:n,needDeleteScript:!0});_&&document.head.appendChild(m)})}function importNodeModule(e){if(!e)throw new Error("import specifier is required");return new Function("name","return import(name)")(e).then(i=>i).catch(i=>{throw console.error(`Error importing module ${e}:`,i),i})}const loadNodeFetch=async()=>{const e=await importNodeModule("node-fetch");return e.default||e},lazyLoaderHookFetch=async(e,r)=>{const i=__webpack_require__.federation.instance.loaderHook,l=await((p,m)=>i.lifecycle.fetch.emit(p,m))(e,r||{});return!l||!(l instanceof Response)?(typeof fetch>"u"?await loadNodeFetch():fetch)(e,r||{}):l};function createScriptNode(url,cb,attrs,createScriptHook){if(createScriptHook){const e=createScriptHook(url);e&&typeof e=="object"&&"url"in e&&(url=e.url)}let urlObj;try{urlObj=new URL(url)}catch(e){console.error("Error constructing URL:",e),cb(new Error(`Invalid URL: ${e}`));return}const getFetch=async()=>{if(typeof __webpack_require__<"u")try{if(__webpack_require__.federation.instance.loaderHook.lifecycle.fetch)return lazyLoaderHookFetch}catch(e){console.warn("federation.instance.loaderHook.lifecycle.fetch failed:",e)}return typeof fetch>"u"?loadNodeFetch():fetch},handleScriptFetch=async(f,urlObj)=>{try{var _vm_constants;const res=await f(urlObj.href),data=await res.text(),[path,vm]=await Promise.all([importNodeModule("path"),importNodeModule("vm")]),scriptContext={exports:{},module:{exports:{}}},urlDirname=urlObj.pathname.split("/").slice(0,-1).join("/"),filename=path.basename(urlObj.pathname);var _vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER;const script=new vm.Script(`(function(exports, module, require, __dirname, __filename) {${data}
})`,{filename,importModuleDynamically:(_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER=(_vm_constants=vm.constants)==null?void 0:_vm_constants.USE_MAIN_CONTEXT_DEFAULT_LOADER)!=null?_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER:importNodeModule});script.runInThisContext()(scriptContext.exports,scriptContext.module,eval("require"),urlDirname,filename);const exportedInterface=scriptContext.module.exports||scriptContext.exports;if(attrs&&exportedInterface&&attrs.globalName){const e=exportedInterface[attrs.globalName]||exportedInterface;cb(void 0,e);return}cb(void 0,exportedInterface)}catch(e){cb(e instanceof Error?e:new Error(`Script execution error: ${e}`))}};getFetch().then(async e=>{if((attrs==null?void 0:attrs.type)==="esm"||(attrs==null?void 0:attrs.type)==="module")return loadModule(urlObj.href,{fetch:e,vm:await importNodeModule("vm")}).then(async r=>{await r.evaluate(),cb(void 0,r.namespace)}).catch(r=>{cb(r instanceof Error?r:new Error(`Script execution error: ${r}`))});handleScriptFetch(e,urlObj)}).catch(e=>{cb(e)})}function loadScriptNode(e,r){return new Promise((i,n)=>{createScriptNode(e,(l,p)=>{if(l)n(l);else{var m,_;const E=(r==null||(m=r.attrs)==null?void 0:m.globalName)||`__FEDERATION_${r==null||(_=r.attrs)==null?void 0:_.name}:custom__`,b=globalThis[E]=p;i(b)}},r.attrs,r.createScriptHook)})}async function loadModule(e,r){const{fetch:i,vm:n}=r,p=await(await i(e)).text(),m=new n.SourceTextModule(p,{importModuleDynamically:async(_,E)=>{const b=new URL(_,e).href;return loadModule(b,r)}});return await m.link(async _=>{const E=new URL(_,e).href;return await loadModule(E,r)}),m}function normalizeOptions(e,r,i){return function(n){if(n===!1)return!1;if(typeof n>"u")return e?r:!1;if(n===!0)return r;if(n&&typeof n=="object")return polyfills$1._extends({},r,n);throw new Error(`Unexpected type for \`${i}\`, expect boolean/undefined/object, got: ${typeof n}`)}}index_cjs.BROWSER_LOG_KEY=BROWSER_LOG_KEY;index_cjs.BROWSER_LOG_VALUE=BROWSER_LOG_VALUE;index_cjs.ENCODE_NAME_PREFIX=ENCODE_NAME_PREFIX;index_cjs.EncodedNameTransformMap=EncodedNameTransformMap;index_cjs.FederationModuleManifest=FederationModuleManifest;index_cjs.Logger=Logger;index_cjs.MANIFEST_EXT=MANIFEST_EXT;index_cjs.MFModuleType=MFModuleType;index_cjs.MFPrefetchCommon=MFPrefetchCommon;index_cjs.MODULE_DEVTOOL_IDENTIFIER=MODULE_DEVTOOL_IDENTIFIER;index_cjs.ManifestFileName=ManifestFileName;index_cjs.NameTransformMap=NameTransformMap;index_cjs.NameTransformSymbol=NameTransformSymbol;index_cjs.SEPARATOR=SEPARATOR;index_cjs.StatsFileName=StatsFileName;index_cjs.TEMP_DIR=TEMP_DIR;index_cjs.assert=assert$1;index_cjs.composeKeyWithSeparator=composeKeyWithSeparator;index_cjs.containerPlugin=ContainerPlugin;index_cjs.containerReferencePlugin=ContainerReferencePlugin;index_cjs.createLink=createLink;index_cjs.createScript=createScript;index_cjs.createScriptNode=createScriptNode;index_cjs.decodeName=decodeName;index_cjs.encodeName=encodeName;index_cjs.error=error$1;index_cjs.generateExposeFilename=generateExposeFilename;index_cjs.generateShareFilename=generateShareFilename;index_cjs.generateSnapshotFromManifest=generateSnapshotFromManifest;index_cjs.getProcessEnv=getProcessEnv;index_cjs.getResourceUrl=getResourceUrl;index_cjs.inferAutoPublicPath=inferAutoPublicPath;index_cjs.isBrowserEnv=isBrowserEnv;index_cjs.isDebugMode=isDebugMode;index_cjs.isManifestProvider=isManifestProvider;index_cjs.isStaticResourcesEqual=isStaticResourcesEqual;index_cjs.loadScript=loadScript;index_cjs.loadScriptNode=loadScriptNode;index_cjs.logger=logger;index_cjs.moduleFederationPlugin=ModuleFederationPlugin;index_cjs.normalizeOptions=normalizeOptions;index_cjs.parseEntry=parseEntry;index_cjs.safeToString=safeToString;index_cjs.safeWrapper=safeWrapper;index_cjs.sharePlugin=SharePlugin;index_cjs.simpleJoinRemoteEntry=simpleJoinRemoteEntry;index_cjs.warn=warn$1;var share_cjs={},polyfills=polyfills_cjs$1,sdk=index_cjs;function getBuilderId(){return typeof FEDERATION_BUILD_IDENTIFIER<"u"?FEDERATION_BUILD_IDENTIFIER:""}const LOG_CATEGORY="[ Federation Runtime ]";function assert(e,r){e||error(r)}function error(e){throw e instanceof Error?(e.message=`${LOG_CATEGORY}: ${e.message}`,e):new Error(`${LOG_CATEGORY}: ${e}`)}function warn(e){e instanceof Error?(e.message=`${LOG_CATEGORY}: ${e.message}`,console.warn(e)):console.warn(`${LOG_CATEGORY}: ${e}`)}function addUniqueItem(e,r){return e.findIndex(i=>i===r)===-1&&e.push(r),e}function getFMId(e){return"version"in e&&e.version?`${e.name}:${e.version}`:"entry"in e&&e.entry?`${e.name}:${e.entry}`:`${e.name}`}function isRemoteInfoWithEntry(e){return typeof e.entry<"u"}function isPureRemoteEntry(e){return!e.entry.includes(".json")&&e.entry.includes(".js")}function isObject(e){return e&&typeof e=="object"}const objectToString=Object.prototype.toString;function isPlainObject(e){return objectToString.call(e)==="[object Object]"}function arrayOptions(e){return Array.isArray(e)?e:[e]}function getRemoteEntryInfoFromSnapshot(e){const r={url:"",type:"global",globalName:""};return sdk.isBrowserEnv()?"remoteEntry"in e?{url:e.remoteEntry,type:e.remoteEntryType,globalName:e.globalName}:r:"ssrRemoteEntry"in e?{url:e.ssrRemoteEntry||r.url,type:e.ssrRemoteEntryType||r.type,globalName:e.globalName}:r}const nativeGlobal=(()=>{try{return new Function("return this")()}catch{return globalThis}})(),Global=nativeGlobal;function definePropertyGlobalVal(e,r,i){Object.defineProperty(e,r,{value:i,configurable:!1,writable:!0})}function includeOwnProperty(e,r){return Object.hasOwnProperty.call(e,r)}includeOwnProperty(globalThis,"__GLOBAL_LOADING_REMOTE_ENTRY__")||definePropertyGlobalVal(globalThis,"__GLOBAL_LOADING_REMOTE_ENTRY__",{});const globalLoading=globalThis.__GLOBAL_LOADING_REMOTE_ENTRY__;function setGlobalDefaultVal(e){var r,i,n,l,p,m;includeOwnProperty(e,"__VMOK__")&&!includeOwnProperty(e,"__FEDERATION__")&&definePropertyGlobalVal(e,"__FEDERATION__",e.__VMOK__),includeOwnProperty(e,"__FEDERATION__")||(definePropertyGlobalVal(e,"__FEDERATION__",{__GLOBAL_PLUGIN__:[],__INSTANCES__:[],moduleInfo:{},__SHARE__:{},__MANIFEST_LOADING__:{},__PRELOADED_MAP__:new Map}),definePropertyGlobalVal(e,"__VMOK__",e.__FEDERATION__));var _;(_=(r=e.__FEDERATION__).__GLOBAL_PLUGIN__)!=null||(r.__GLOBAL_PLUGIN__=[]);var E;(E=(i=e.__FEDERATION__).__INSTANCES__)!=null||(i.__INSTANCES__=[]);var b;(b=(n=e.__FEDERATION__).moduleInfo)!=null||(n.moduleInfo={});var A;(A=(l=e.__FEDERATION__).__SHARE__)!=null||(l.__SHARE__={});var O;(O=(p=e.__FEDERATION__).__MANIFEST_LOADING__)!=null||(p.__MANIFEST_LOADING__={});var N;(N=(m=e.__FEDERATION__).__PRELOADED_MAP__)!=null||(m.__PRELOADED_MAP__=new Map)}setGlobalDefaultVal(globalThis);setGlobalDefaultVal(nativeGlobal);function resetFederationGlobalInfo(){globalThis.__FEDERATION__.__GLOBAL_PLUGIN__=[],globalThis.__FEDERATION__.__INSTANCES__=[],globalThis.__FEDERATION__.moduleInfo={},globalThis.__FEDERATION__.__SHARE__={},globalThis.__FEDERATION__.__MANIFEST_LOADING__={}}function getGlobalFederationInstance(e,r){const i=getBuilderId();return globalThis.__FEDERATION__.__INSTANCES__.find(n=>!!(i&&n.options.id===getBuilderId()||n.options.name===e&&!n.options.version&&!r||n.options.name===e&&r&&n.options.version===r))}function setGlobalFederationInstance(e){globalThis.__FEDERATION__.__INSTANCES__.push(e)}function getGlobalFederationConstructor(){return globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR__}function setGlobalFederationConstructor(e,r=sdk.isDebugMode()){r&&(globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR__=e,globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR_VERSION__="0.6.10")}function getInfoWithoutType(e,r){if(typeof r=="string"){if(e[r])return{value:e[r],key:r};{const n=Object.keys(e);for(const l of n){const[p,m]=l.split(":"),_=`${p}:${r}`,E=e[_];if(E)return{value:E,key:_}}return{value:void 0,key:r}}}else throw new Error("key must be string")}const getGlobalSnapshot=()=>nativeGlobal.__FEDERATION__.moduleInfo,getTargetSnapshotInfoByModuleInfo=(e,r)=>{const i=getFMId(e),n=getInfoWithoutType(r,i).value;if(n&&!n.version&&"version"in e&&e.version&&(n.version=e.version),n)return n;if("version"in e&&e.version){const{version:l}=e,p=polyfills._object_without_properties_loose(e,["version"]),m=getFMId(p),_=getInfoWithoutType(nativeGlobal.__FEDERATION__.moduleInfo,m).value;if((_==null?void 0:_.version)===l)return _}},getGlobalSnapshotInfoByModuleInfo=e=>getTargetSnapshotInfoByModuleInfo(e,nativeGlobal.__FEDERATION__.moduleInfo),setGlobalSnapshotInfoByModuleInfo=(e,r)=>{const i=getFMId(e);return nativeGlobal.__FEDERATION__.moduleInfo[i]=r,nativeGlobal.__FEDERATION__.moduleInfo},addGlobalSnapshot=e=>(nativeGlobal.__FEDERATION__.moduleInfo=polyfills._extends({},nativeGlobal.__FEDERATION__.moduleInfo,e),()=>{const r=Object.keys(e);for(const i of r)delete nativeGlobal.__FEDERATION__.moduleInfo[i]}),getRemoteEntryExports=(e,r)=>{const i=r||`__FEDERATION_${e}:custom__`,n=globalThis[i];return{remoteEntryKey:i,entryExports:n}},registerGlobalPlugins=e=>{const{__GLOBAL_PLUGIN__:r}=nativeGlobal.__FEDERATION__;e.forEach(i=>{r.findIndex(n=>n.name===i.name)===-1?r.push(i):warn(`The plugin ${i.name} has been registered.`)})},getGlobalHostPlugins=()=>nativeGlobal.__FEDERATION__.__GLOBAL_PLUGIN__,getPreloaded=e=>globalThis.__FEDERATION__.__PRELOADED_MAP__.get(e),setPreloaded=e=>globalThis.__FEDERATION__.__PRELOADED_MAP__.set(e,!0),DEFAULT_SCOPE="default",DEFAULT_REMOTE_TYPE="global",buildIdentifier="[0-9A-Za-z-]+",build=`(?:\\+(${buildIdentifier}(?:\\.${buildIdentifier})*))`,numericIdentifier="0|[1-9]\\d*",numericIdentifierLoose="[0-9]+",nonNumericIdentifier="\\d*[a-zA-Z-][a-zA-Z0-9-]*",preReleaseIdentifierLoose=`(?:${numericIdentifierLoose}|${nonNumericIdentifier})`,preReleaseLoose=`(?:-?(${preReleaseIdentifierLoose}(?:\\.${preReleaseIdentifierLoose})*))`,preReleaseIdentifier=`(?:${numericIdentifier}|${nonNumericIdentifier})`,preRelease=`(?:-(${preReleaseIdentifier}(?:\\.${preReleaseIdentifier})*))`,xRangeIdentifier=`${numericIdentifier}|x|X|\\*`,xRangePlain=`[v=\\s]*(${xRangeIdentifier})(?:\\.(${xRangeIdentifier})(?:\\.(${xRangeIdentifier})(?:${preRelease})?${build}?)?)?`,hyphenRange=`^\\s*(${xRangePlain})\\s+-\\s+(${xRangePlain})\\s*$`,mainVersionLoose=`(${numericIdentifierLoose})\\.(${numericIdentifierLoose})\\.(${numericIdentifierLoose})`,loosePlain=`[v=\\s]*${mainVersionLoose}${preReleaseLoose}?${build}?`,gtlt="((?:<|>)?=?)",comparatorTrim=`(\\s*)${gtlt}\\s*(${loosePlain}|${xRangePlain})`,loneTilde="(?:~>?)",tildeTrim=`(\\s*)${loneTilde}\\s+`,loneCaret="(?:\\^)",caretTrim=`(\\s*)${loneCaret}\\s+`,star="(<|>)?=?\\s*\\*",caret=`^${loneCaret}${xRangePlain}$`,mainVersion=`(${numericIdentifier})\\.(${numericIdentifier})\\.(${numericIdentifier})`,fullPlain=`v?${mainVersion}${preRelease}?${build}?`,tilde=`^${loneTilde}${xRangePlain}$`,xRange=`^${gtlt}\\s*${xRangePlain}$`,comparator=`^${gtlt}\\s*(${fullPlain})$|^$`,gte0="^\\s*>=\\s*0.0.0\\s*$";function parseRegex(e){return new RegExp(e)}function isXVersion(e){return!e||e.toLowerCase()==="x"||e==="*"}function pipe(...e){return r=>e.reduce((i,n)=>n(i),r)}function extractComparator(e){return e.match(parseRegex(comparator))}function combineVersion(e,r,i,n){const l=`${e}.${r}.${i}`;return n?`${l}-${n}`:l}function parseHyphen(e){return e.replace(parseRegex(hyphenRange),(r,i,n,l,p,m,_,E,b,A,O,N)=>(isXVersion(n)?i="":isXVersion(l)?i=`>=${n}.0.0`:isXVersion(p)?i=`>=${n}.${l}.0`:i=`>=${i}`,isXVersion(b)?E="":isXVersion(A)?E=`<${Number(b)+1}.0.0-0`:isXVersion(O)?E=`<${b}.${Number(A)+1}.0-0`:N?E=`<=${b}.${A}.${O}-${N}`:E=`<=${E}`,`${i} ${E}`.trim()))}function parseComparatorTrim(e){return e.replace(parseRegex(comparatorTrim),"$1$2$3")}function parseTildeTrim(e){return e.replace(parseRegex(tildeTrim),"$1~")}function parseCaretTrim(e){return e.replace(parseRegex(caretTrim),"$1^")}function parseCarets(e){return e.trim().split(/\s+/).map(r=>r.replace(parseRegex(caret),(i,n,l,p,m)=>isXVersion(n)?"":isXVersion(l)?`>=${n}.0.0 <${Number(n)+1}.0.0-0`:isXVersion(p)?n==="0"?`>=${n}.${l}.0 <${n}.${Number(l)+1}.0-0`:`>=${n}.${l}.0 <${Number(n)+1}.0.0-0`:m?n==="0"?l==="0"?`>=${n}.${l}.${p}-${m} <${n}.${l}.${Number(p)+1}-0`:`>=${n}.${l}.${p}-${m} <${n}.${Number(l)+1}.0-0`:`>=${n}.${l}.${p}-${m} <${Number(n)+1}.0.0-0`:n==="0"?l==="0"?`>=${n}.${l}.${p} <${n}.${l}.${Number(p)+1}-0`:`>=${n}.${l}.${p} <${n}.${Number(l)+1}.0-0`:`>=${n}.${l}.${p} <${Number(n)+1}.0.0-0`)).join(" ")}function parseTildes(e){return e.trim().split(/\s+/).map(r=>r.replace(parseRegex(tilde),(i,n,l,p,m)=>isXVersion(n)?"":isXVersion(l)?`>=${n}.0.0 <${Number(n)+1}.0.0-0`:isXVersion(p)?`>=${n}.${l}.0 <${n}.${Number(l)+1}.0-0`:m?`>=${n}.${l}.${p}-${m} <${n}.${Number(l)+1}.0-0`:`>=${n}.${l}.${p} <${n}.${Number(l)+1}.0-0`)).join(" ")}function parseXRanges(e){return e.split(/\s+/).map(r=>r.trim().replace(parseRegex(xRange),(i,n,l,p,m,_)=>{const E=isXVersion(l),b=E||isXVersion(p),A=b||isXVersion(m);return n==="="&&A&&(n=""),_="",E?n===">"||n==="<"?"<0.0.0-0":"*":n&&A?(b&&(p=0),m=0,n===">"?(n=">=",b?(l=Number(l)+1,p=0,m=0):(p=Number(p)+1,m=0)):n==="<="&&(n="<",b?l=Number(l)+1:p=Number(p)+1),n==="<"&&(_="-0"),`${n+l}.${p}.${m}${_}`):b?`>=${l}.0.0${_} <${Number(l)+1}.0.0-0`:A?`>=${l}.${p}.0${_} <${l}.${Number(p)+1}.0-0`:i})).join(" ")}function parseStar(e){return e.trim().replace(parseRegex(star),"")}function parseGTE0(e){return e.trim().replace(parseRegex(gte0),"")}function compareAtom(e,r){return e=Number(e)||e,r=Number(r)||r,e>r?1:e===r?0:-1}function comparePreRelease(e,r){const{preRelease:i}=e,{preRelease:n}=r;if(i===void 0&&n)return 1;if(i&&n===void 0)return-1;if(i===void 0&&n===void 0)return 0;for(let l=0,p=i.length;l<=p;l++){const m=i[l],_=n[l];if(m!==_)return m===void 0&&_===void 0?0:m?_?compareAtom(m,_):-1:1}return 0}function compareVersion(e,r){return compareAtom(e.major,r.major)||compareAtom(e.minor,r.minor)||compareAtom(e.patch,r.patch)||comparePreRelease(e,r)}function eq(e,r){return e.version===r.version}function compare(e,r){switch(e.operator){case"":case"=":return eq(e,r);case">":return compareVersion(e,r)<0;case">=":return eq(e,r)||compareVersion(e,r)<0;case"<":return compareVersion(e,r)>0;case"<=":return eq(e,r)||compareVersion(e,r)>0;case void 0:return!0;default:return!1}}function parseComparatorString(e){return pipe(parseCarets,parseTildes,parseXRanges,parseStar)(e)}function parseRange(e){return pipe(parseHyphen,parseComparatorTrim,parseTildeTrim,parseCaretTrim)(e.trim()).split(/\s+/).join(" ")}function satisfy(e,r){if(!e)return!1;const l=parseRange(r).split(" ").map(N=>parseComparatorString(N)).join(" ").split(/\s+/).map(N=>parseGTE0(N)),p=extractComparator(e);if(!p)return!1;const[,m,,_,E,b,A]=p,O={operator:m,version:combineVersion(_,E,b,A),major:_,minor:E,patch:b,preRelease:A==null?void 0:A.split(".")};for(const N of l){const k=extractComparator(N);if(!k)return!1;const[,z,,G,D,H,X]=k,K={operator:z,version:combineVersion(G,D,H,X),major:G,minor:D,patch:H,preRelease:X==null?void 0:X.split(".")};if(!compare(K,O))return!1}return!0}function formatShare(e,r,i,n){let l;"get"in e?l=e.get:"lib"in e?l=()=>Promise.resolve(e.lib):l=()=>Promise.resolve(()=>{throw new Error(`Can not get shared '${i}'!`)}),e.strategy&&warn('"shared.strategy is deprecated, please set in initOptions.shareStrategy instead!"');var p,m,_;return polyfills._extends({deps:[],useIn:[],from:r,loading:null},e,{shareConfig:polyfills._extends({requiredVersion:`^${e.version}`,singleton:!1,eager:!1,strictVersion:!1},e.shareConfig),get:l,loaded:e!=null&&e.loaded||"lib"in e?!0:void 0,version:(p=e.version)!=null?p:"0",scope:Array.isArray(e.scope)?e.scope:[(m=e.scope)!=null?m:"default"],strategy:((_=e.strategy)!=null?_:n)||"version-first"})}function formatShareConfigs(e,r){const i=r.shared||{},n=r.name,l=Object.keys(i).reduce((m,_)=>{const E=arrayOptions(i[_]);return m[_]=m[_]||[],E.forEach(b=>{m[_].push(formatShare(b,n,_,r.shareStrategy))}),m},{}),p=polyfills._extends({},e.shared);return Object.keys(l).forEach(m=>{p[m]?l[m].forEach(_=>{p[m].find(b=>b.version===_.version)||p[m].push(_)}):p[m]=l[m]}),{shared:p,shareInfos:l}}function versionLt(e,r){const i=n=>{if(!Number.isNaN(Number(n))){const p=n.split(".");let m=n;for(let _=0;_<3-p.length;_++)m+=".0";return m}return n};return!!satisfy(i(e),`<=${i(r)}`)}const findVersion=(e,r)=>{const i=r||function(n,l){return versionLt(n,l)};return Object.keys(e).reduce((n,l)=>!n||i(n,l)||n==="0"?l:n,0)},isLoaded=e=>!!e.loaded||typeof e.lib=="function";function findSingletonVersionOrderByVersion(e,r,i){const n=e[r][i],l=function(p,m){return!isLoaded(n[p])&&versionLt(p,m)};return findVersion(e[r][i],l)}function findSingletonVersionOrderByLoaded(e,r,i){const n=e[r][i],l=function(p,m){return isLoaded(n[m])?isLoaded(n[p])?!!versionLt(p,m):!0:isLoaded(n[p])?!1:versionLt(p,m)};return findVersion(e[r][i],l)}function getFindShareFunction(e){return e==="loaded-first"?findSingletonVersionOrderByLoaded:findSingletonVersionOrderByVersion}function getRegisteredShare(e,r,i,n){if(!e)return;const{shareConfig:l,scope:p=DEFAULT_SCOPE,strategy:m}=i,_=Array.isArray(p)?p:[p];for(const E of _)if(l&&e[E]&&e[E][r]){const{requiredVersion:b}=l,O=getFindShareFunction(m)(e,E,r),N=()=>{if(l.singleton){if(typeof b=="string"&&!satisfy(O,b)){const G=`Version ${O} from ${O&&e[E][r][O].from} of shared singleton module ${r} does not satisfy the requirement of ${i.from} which needs ${b})`;l.strictVersion?error(G):warn(G)}return e[E][r][O]}else{if(b===!1||b==="*"||satisfy(O,b))return e[E][r][O];for(const[G,D]of Object.entries(e[E][r]))if(satisfy(G,b))return D}},k={shareScopeMap:e,scope:E,pkgName:r,version:O,GlobalFederation:Global.__FEDERATION__,resolver:N};return(n.emit(k)||k).resolver()}}function getGlobalShareScope(){return Global.__FEDERATION__.__SHARE__}function getTargetSharedOptions(e){const{pkgName:r,extraOptions:i,shareInfos:n}=e,l=_=>{if(!_)return;const E={};_.forEach(O=>{E[O.version]=O});const A=findVersion(E,function(O,N){return!isLoaded(E[O])&&versionLt(O,N)});return E[A]};var p;const m=(p=i==null?void 0:i.resolver)!=null?p:l;return Object.assign({},m(n[r]),i==null?void 0:i.customShareInfo)}share_cjs.DEFAULT_REMOTE_TYPE=DEFAULT_REMOTE_TYPE;share_cjs.DEFAULT_SCOPE=DEFAULT_SCOPE;share_cjs.Global=Global;share_cjs.addGlobalSnapshot=addGlobalSnapshot;share_cjs.addUniqueItem=addUniqueItem;share_cjs.arrayOptions=arrayOptions;share_cjs.assert=assert;share_cjs.error=error;share_cjs.formatShareConfigs=formatShareConfigs;share_cjs.getBuilderId=getBuilderId;share_cjs.getFMId=getFMId;share_cjs.getGlobalFederationConstructor=getGlobalFederationConstructor;share_cjs.getGlobalFederationInstance=getGlobalFederationInstance;share_cjs.getGlobalHostPlugins=getGlobalHostPlugins;share_cjs.getGlobalShareScope=getGlobalShareScope;share_cjs.getGlobalSnapshot=getGlobalSnapshot;share_cjs.getGlobalSnapshotInfoByModuleInfo=getGlobalSnapshotInfoByModuleInfo;share_cjs.getInfoWithoutType=getInfoWithoutType;share_cjs.getPreloaded=getPreloaded;share_cjs.getRegisteredShare=getRegisteredShare;share_cjs.getRemoteEntryExports=getRemoteEntryExports;share_cjs.getRemoteEntryInfoFromSnapshot=getRemoteEntryInfoFromSnapshot;share_cjs.getTargetSharedOptions=getTargetSharedOptions;share_cjs.getTargetSnapshotInfoByModuleInfo=getTargetSnapshotInfoByModuleInfo;share_cjs.globalLoading=globalLoading;share_cjs.isObject=isObject;share_cjs.isPlainObject=isPlainObject;share_cjs.isPureRemoteEntry=isPureRemoteEntry;share_cjs.isRemoteInfoWithEntry=isRemoteInfoWithEntry;share_cjs.nativeGlobal=nativeGlobal;share_cjs.registerGlobalPlugins=registerGlobalPlugins;share_cjs.resetFederationGlobalInfo=resetFederationGlobalInfo;share_cjs.setGlobalFederationConstructor=setGlobalFederationConstructor;share_cjs.setGlobalFederationInstance=setGlobalFederationInstance;share_cjs.setGlobalSnapshotInfoByModuleInfo=setGlobalSnapshotInfoByModuleInfo;share_cjs.setPreloaded=setPreloaded;share_cjs.warn=warn;(function(e){var r=polyfills_cjs$1,i=index_cjs,n=share_cjs;function l(h,t){for(const o of h){const s=t.startsWith(o.name);let a=t.replace(o.name,"");if(s){if(a.startsWith("/")){const c=o.name;return a=`.${a}`,{pkgNameOrAlias:c,expose:a,remote:o}}else if(a==="")return{pkgNameOrAlias:o.name,expose:".",remote:o}}const d=o.alias&&t.startsWith(o.alias);let u=o.alias&&t.replace(o.alias,"");if(o.alias&&d){if(u&&u.startsWith("/")){const c=o.alias;return u=`.${u}`,{pkgNameOrAlias:c,expose:u,remote:o}}else if(u==="")return{pkgNameOrAlias:o.alias,expose:".",remote:o}}}}function p(h,t){for(const o of h)if(t===o.name||o.alias&&t===o.alias)return o}function m(h,t){const o=n.getGlobalHostPlugins();return o.length>0&&o.forEach(s=>{h!=null&&h.find(a=>a.name!==s.name)&&h.push(s)}),h&&h.length>0&&h.forEach(s=>{t.forEach(a=>{a.applyPlugin(s)})}),h}async function _({entry:h,remoteEntryExports:t}){return new Promise((o,s)=>{try{t?o(t):new Function("callbacks",`import("${h}").then(callbacks[0]).catch(callbacks[1])`)([o,s])}catch(a){s(a)}})}async function E({entry:h,remoteEntryExports:t}){return new Promise((o,s)=>{try{t?o(t):new Function("callbacks",`System.import("${h}").then(callbacks[0]).catch(callbacks[1])`)([o,s])}catch(a){s(a)}})}async function b({name:h,globalName:t,entry:o,createScriptHook:s}){const{entryExports:a}=n.getRemoteEntryExports(h,t);return a||i.loadScript(o,{attrs:{},createScriptHook:(d,u)=>{const c=s.emit({url:d,attrs:u});if(c&&(c instanceof HTMLScriptElement||"script"in c||"timeout"in c))return c}}).then(()=>{const{remoteEntryKey:d,entryExports:u}=n.getRemoteEntryExports(h,t);return n.assert(u,`
      Unable to use the ${h}'s '${o}' URL with ${d}'s globalName to get remoteEntry exports.
      Possible reasons could be:

      1. '${o}' is not the correct URL, or the remoteEntry resource or name is incorrect.

      2. ${d} cannot be used to get remoteEntry exports in the window object.
    `),u}).catch(d=>{throw d})}async function A({remoteInfo:h,remoteEntryExports:t,createScriptHook:o}){const{entry:s,entryGlobalName:a,name:d,type:u}=h;switch(u){case"esm":case"module":return _({entry:s,remoteEntryExports:t});case"system":return E({entry:s,remoteEntryExports:t});default:return b({entry:s,globalName:a,name:d,createScriptHook:o})}}async function O({remoteInfo:h,createScriptHook:t}){const{entry:o,entryGlobalName:s,name:a,type:d}=h,{entryExports:u}=n.getRemoteEntryExports(a,s);return u||i.loadScriptNode(o,{attrs:{name:a,globalName:s,type:d},createScriptHook:(c,y)=>{const g=t.emit({url:c,attrs:y});if(g&&"url"in g)return g}}).then(()=>{const{remoteEntryKey:c,entryExports:y}=n.getRemoteEntryExports(a,s);return n.assert(y,`
      Unable to use the ${a}'s '${o}' URL with ${c}'s globalName to get remoteEntry exports.
      Possible reasons could be:

      1. '${o}' is not the correct URL, or the remoteEntry resource or name is incorrect.

      2. ${c} cannot be used to get remoteEntry exports in the window object.
    `),y}).catch(c=>{throw c})}function N(h){const{entry:t,name:o}=h;return i.composeKeyWithSeparator(o,t)}async function k({origin:h,remoteEntryExports:t,remoteInfo:o}){const s=N(o);if(t)return t;if(!n.globalLoading[s]){const a=h.remoteHandler.hooks.lifecycle.loadEntry,d=h.loaderHook.lifecycle.createScript;n.globalLoading[s]=a.emit({createScriptHook:d,remoteInfo:o,remoteEntryExports:t}).then(u=>u||(i.isBrowserEnv()?A({remoteInfo:o,remoteEntryExports:t,createScriptHook:d}):O({remoteInfo:o,createScriptHook:d})))}return n.globalLoading[s]}function z(h){return r._extends({},h,{entry:"entry"in h?h.entry:"",type:h.type||n.DEFAULT_REMOTE_TYPE,entryGlobalName:h.entryGlobalName||h.name,shareScope:h.shareScope||n.DEFAULT_SCOPE})}let G=class{async getEntry(){if(this.remoteEntryExports)return this.remoteEntryExports;const t=await k({origin:this.host,remoteInfo:this.remoteInfo,remoteEntryExports:this.remoteEntryExports});return n.assert(t,`remoteEntryExports is undefined 
 ${i.safeToString(this.remoteInfo)}`),this.remoteEntryExports=t,this.remoteEntryExports}async get(t,o,s,a){const{loadFactory:d=!0}=s||{loadFactory:!0},u=await this.getEntry();if(!this.inited){const S=this.host.shareScopeMap,T=this.remoteInfo.shareScope||"default";S[T]||(S[T]={});const R=S[T],I=[],$={version:this.remoteInfo.version||""};Object.defineProperty($,"shareScopeMap",{value:S,enumerable:!1});const F=await this.host.hooks.lifecycle.beforeInitContainer.emit({shareScope:R,remoteEntryInitOptions:$,initScope:I,remoteInfo:this.remoteInfo,origin:this.host});typeof(u==null?void 0:u.init)>"u"&&console.error('The remote entry interface does not contain "init"',`
`,"Ensure the name of this remote is not reserved or in use. Check if anything already exists on window[nameOfRemote]",`
`,"Ensure that window[nameOfRemote] is returning a {get,init} object."),await u.init(F.shareScope,F.initScope,F.remoteEntryInitOptions),await this.host.hooks.lifecycle.initContainer.emit(r._extends({},F,{id:t,remoteSnapshot:a,remoteEntryExports:u}))}this.lib=u,this.inited=!0;const c=await u.get(o);n.assert(c,`${n.getFMId(this.remoteInfo)} remote don't export ${o}.`);const y=this.wraperFactory(c,t);return d?await y():y}wraperFactory(t,o){function s(a,d){a&&typeof a=="object"&&Object.isExtensible(a)&&!Object.getOwnPropertyDescriptor(a,Symbol.for("mf_module_id"))&&Object.defineProperty(a,Symbol.for("mf_module_id"),{value:d,enumerable:!1})}return t instanceof Promise?async()=>{const a=await t();return s(a,o),a}:()=>{const a=t();return s(a,o),a}}constructor({remoteInfo:t,host:o}){this.inited=!1,this.lib=void 0,this.remoteInfo=t,this.host=o}};class D{on(t){typeof t=="function"&&this.listeners.add(t)}once(t){const o=this;this.on(function s(...a){return o.remove(s),t.apply(null,a)})}emit(...t){let o;return this.listeners.size>0&&this.listeners.forEach(s=>{o=s(...t)}),o}remove(t){this.listeners.delete(t)}removeAll(){this.listeners.clear()}constructor(t){this.type="",this.listeners=new Set,t&&(this.type=t)}}class H extends D{emit(...t){let o;const s=Array.from(this.listeners);if(s.length>0){let a=0;const d=u=>u===!1?!1:a<s.length?Promise.resolve(s[a++].apply(null,t)).then(d):u;o=d()}return Promise.resolve(o)}}function X(h,t){if(!n.isObject(t))return!1;if(h!==t){for(const o in h)if(!(o in t))return!1}return!0}class K extends D{emit(t){n.isObject(t)||n.error(`The data for the "${this.type}" hook should be an object.`);for(const o of this.listeners)try{const s=o(t);if(X(t,s))t=s;else{this.onerror(`A plugin returned an unacceptable value for the "${this.type}" type.`);break}}catch(s){n.warn(s),this.onerror(s)}return t}constructor(t){super(),this.onerror=n.error,this.type=t}}class V extends D{emit(t){n.isObject(t)||n.error(`The response data for the "${this.type}" hook must be an object.`);const o=Array.from(this.listeners);if(o.length>0){let s=0;const a=u=>(n.warn(u),this.onerror(u),t),d=u=>{if(X(t,u)){if(t=u,s<o.length)try{return Promise.resolve(o[s++](t)).then(d,a)}catch(c){return a(c)}}else this.onerror(`A plugin returned an incorrect value for the "${this.type}" type.`);return t};return Promise.resolve(d(t))}return Promise.resolve(t)}constructor(t){super(),this.onerror=n.error,this.type=t}}class P{applyPlugin(t){n.assert(n.isPlainObject(t),"Plugin configuration is invalid.");const o=t.name;n.assert(o,"A name must be provided by the plugin."),this.registerPlugins[o]||(this.registerPlugins[o]=t,Object.keys(this.lifecycle).forEach(s=>{const a=t[s];a&&this.lifecycle[s].on(a)}))}removePlugin(t){n.assert(t,"A name is required.");const o=this.registerPlugins[t];n.assert(o,`The plugin "${t}" is not registered.`),Object.keys(o).forEach(s=>{s!=="name"&&this.lifecycle[s].remove(o[s])})}inherit({lifecycle:t,registerPlugins:o}){Object.keys(t).forEach(s=>{n.assert(!this.lifecycle[s],`The hook "${s}" has a conflict and cannot be inherited.`),this.lifecycle[s]=t[s]}),Object.keys(o).forEach(s=>{n.assert(!this.registerPlugins[s],`The plugin "${s}" has a conflict and cannot be inherited.`),this.applyPlugin(o[s])})}constructor(t){this.registerPlugins={},this.lifecycle=t,this.lifecycleKeys=Object.keys(t)}}function J(h){return r._extends({resourceCategory:"sync",share:!0,depsRemote:!0,prefetchInterface:!1},h)}function Q(h,t){return t.map(o=>{const s=p(h,o.nameOrAlias);return n.assert(s,`Unable to preload ${o.nameOrAlias} as it is not included in ${!s&&i.safeToString({remoteInfo:s,remotes:h})}`),{remote:s,preloadConfig:J(o)}})}function ee(h){return h?h.map(t=>t==="."?t:t.startsWith("./")?t.replace("./",""):t):[]}function re(h,t,o,s=!0){const{cssAssets:a,jsAssetsWithoutEntry:d,entryAssets:u}=o;if(t.options.inBrowser){if(u.forEach(c=>{const{moduleInfo:y}=c,g=t.moduleCache.get(h.name);k(g?{origin:t,remoteInfo:y,remoteEntryExports:g.remoteEntryExports}:{origin:t,remoteInfo:y,remoteEntryExports:void 0})}),s){const c={rel:"preload",as:"style"};a.forEach(y=>{const{link:g,needAttach:S}=i.createLink({url:y,cb:()=>{},attrs:c,createLinkHook:(T,R)=>{const I=t.loaderHook.lifecycle.createLink.emit({url:T,attrs:R});if(I instanceof HTMLLinkElement)return I}});S&&document.head.appendChild(g)})}else{const c={rel:"stylesheet",type:"text/css"};a.forEach(y=>{const{link:g,needAttach:S}=i.createLink({url:y,cb:()=>{},attrs:c,createLinkHook:(T,R)=>{const I=t.loaderHook.lifecycle.createLink.emit({url:T,attrs:R});if(I instanceof HTMLLinkElement)return I},needDeleteLink:!1});S&&document.head.appendChild(g)})}if(s){const c={rel:"preload",as:"script"};d.forEach(y=>{const{link:g,needAttach:S}=i.createLink({url:y,cb:()=>{},attrs:c,createLinkHook:(T,R)=>{const I=t.loaderHook.lifecycle.createLink.emit({url:T,attrs:R});if(I instanceof HTMLLinkElement)return I}});S&&document.head.appendChild(g)})}else{const c={fetchpriority:"high",type:(h==null?void 0:h.type)==="module"?"module":"text/javascript"};d.forEach(y=>{const{script:g,needAttach:S}=i.createScript({url:y,cb:()=>{},attrs:c,createScriptHook:(T,R)=>{const I=t.loaderHook.lifecycle.createScript.emit({url:T,attrs:R});if(I instanceof HTMLScriptElement)return I},needDeleteScript:!0});S&&document.head.appendChild(g)})}}}function oe(h,t){const o=n.getRemoteEntryInfoFromSnapshot(t);o.url||n.error(`The attribute remoteEntry of ${h.name} must not be undefined.`);let s=i.getResourceUrl(t,o.url);!i.isBrowserEnv()&&!s.startsWith("http")&&(s=`https:${s}`),h.type=o.type,h.entryGlobalName=o.globalName,h.entry=s,h.version=t.version,h.buildVersion=t.buildVersion}function ae(){return{name:"snapshot-plugin",async afterResolve(h){const{remote:t,pkgNameOrAlias:o,expose:s,origin:a,remoteInfo:d}=h;if(!n.isRemoteInfoWithEntry(t)||!n.isPureRemoteEntry(t)){const{remoteSnapshot:u,globalSnapshot:c}=await a.snapshotHandler.loadRemoteSnapshotInfo(t);oe(d,u);const y={remote:t,preloadConfig:{nameOrAlias:o,exposes:[s],resourceCategory:"sync",share:!1,depsRemote:!1}},g=await a.remoteHandler.hooks.lifecycle.generatePreloadAssets.emit({origin:a,preloadOptions:y,remoteInfo:d,remote:t,remoteSnapshot:u,globalSnapshot:c});return g&&re(d,a,g,!1),r._extends({},h,{remoteSnapshot:u})}return h}}}function le(h){const t=h.split(":");return t.length===1?{name:t[0],version:void 0}:t.length===2?{name:t[0],version:t[1]}:{name:t[1],version:t[2]}}function se(h,t,o,s,a={},d){const u=n.getFMId(t),{value:c}=n.getInfoWithoutType(h,u),y=d||c;if(y&&!i.isManifestProvider(y)&&(o(y,t,s),y.remotesInfo)){const g=Object.keys(y.remotesInfo);for(const S of g){if(a[S])continue;a[S]=!0;const T=le(S),R=y.remotesInfo[S];se(h,{name:T.name,version:R.matchedVersion},o,!1,a,void 0)}}}function ce(h,t,o,s,a){const d=[],u=[],c=[],y=new Set,g=new Set,{options:S}=h,{preloadConfig:T}=t,{depsRemote:R}=T;if(se(s,o,(v,w,j)=>{let M;if(j)M=T;else if(Array.isArray(R)){const q=R.find(W=>W.nameOrAlias===w.name||W.nameOrAlias===w.alias);if(!q)return;M=J(q)}else if(R===!0)M=T;else return;const x=i.getResourceUrl(v,n.getRemoteEntryInfoFromSnapshot(v).url);x&&c.push({name:w.name,moduleInfo:{name:w.name,entry:x,type:"remoteEntryType"in v?v.remoteEntryType:"global",entryGlobalName:"globalName"in v?v.globalName:w.name,shareScope:"",version:"version"in v?v.version:void 0},url:x});let B="modules"in v?v.modules:[];const U=ee(M.exposes);if(U.length&&"modules"in v){var Z;B=v==null||(Z=v.modules)==null?void 0:Z.reduce((q,W)=>((U==null?void 0:U.indexOf(W.moduleName))!==-1&&q.push(W),q),[])}function C(q){const W=q.map(Y=>i.getResourceUrl(v,Y));return M.filter?W.filter(M.filter):W}if(B){const q=B.length;for(let W=0;W<q;W++){const Y=B[W],ne=`${w.name}/${Y.moduleName}`;h.remoteHandler.hooks.lifecycle.handlePreloadModule.emit({id:Y.moduleName==="."?w.name:ne,name:w.name,remoteSnapshot:v,preloadConfig:M,remote:w,origin:h}),!n.getPreloaded(ne)&&(M.resourceCategory==="all"?(d.push(...C(Y.assets.css.async)),d.push(...C(Y.assets.css.sync)),u.push(...C(Y.assets.js.async)),u.push(...C(Y.assets.js.sync))):(M.resourceCategory="sync")&&(d.push(...C(Y.assets.css.sync)),u.push(...C(Y.assets.js.sync))),n.setPreloaded(ne))}}},!0,{},a),a.shared){const v=(w,j)=>{const M=n.getRegisteredShare(h.shareScopeMap,j.sharedName,w,h.sharedHandler.hooks.lifecycle.resolveShare);M&&typeof M.lib=="function"&&(j.assets.js.sync.forEach(x=>{y.add(x)}),j.assets.css.sync.forEach(x=>{g.add(x)}))};a.shared.forEach(w=>{var j;const M=(j=S.shared)==null?void 0:j[w.sharedName];if(!M)return;const x=w.version?M.find(U=>U.version===w.version):M;if(!x)return;n.arrayOptions(x).forEach(U=>{v(U,w)})})}const $=u.filter(v=>!y.has(v));return{cssAssets:d.filter(v=>!g.has(v)),jsAssetsWithoutEntry:$,entryAssets:c}}const fe=function(){return{name:"generate-preload-assets-plugin",async generatePreloadAssets(h){const{origin:t,preloadOptions:o,remoteInfo:s,remote:a,globalSnapshot:d,remoteSnapshot:u}=h;return n.isRemoteInfoWithEntry(a)&&n.isPureRemoteEntry(a)?{cssAssets:[],jsAssetsWithoutEntry:[],entryAssets:[{name:a.name,url:a.entry,moduleInfo:{name:s.name,entry:a.entry,type:s.type||"global",entryGlobalName:"",shareScope:""}}]}:(oe(s,u),ce(t,o,s,d,u))}}};function ie(h,t){const o=n.getGlobalSnapshotInfoByModuleInfo({name:t.options.name,version:t.options.version}),s=o&&"remotesInfo"in o&&o.remotesInfo&&n.getInfoWithoutType(o.remotesInfo,h.name).value;return s&&s.matchedVersion?{hostGlobalSnapshot:o,globalSnapshot:n.getGlobalSnapshot(),remoteSnapshot:n.getGlobalSnapshotInfoByModuleInfo({name:h.name,version:s.matchedVersion})}:{hostGlobalSnapshot:void 0,globalSnapshot:n.getGlobalSnapshot(),remoteSnapshot:n.getGlobalSnapshotInfoByModuleInfo({name:h.name,version:"version"in h?h.version:void 0})}}class ue{async loadSnapshot(t){const{options:o}=this.HostInstance,{hostGlobalSnapshot:s,remoteSnapshot:a,globalSnapshot:d}=this.getGlobalRemoteInfo(t),{remoteSnapshot:u,globalSnapshot:c}=await this.hooks.lifecycle.loadSnapshot.emit({options:o,moduleInfo:t,hostGlobalSnapshot:s,remoteSnapshot:a,globalSnapshot:d});return{remoteSnapshot:u,globalSnapshot:c}}async loadRemoteSnapshotInfo(t){const{options:o}=this.HostInstance;await this.hooks.lifecycle.beforeLoadRemoteSnapshot.emit({options:o,moduleInfo:t});let s=n.getGlobalSnapshotInfoByModuleInfo({name:this.HostInstance.options.name,version:this.HostInstance.options.version});s||(s={version:this.HostInstance.options.version||"",remoteEntry:"",remotesInfo:{}},n.addGlobalSnapshot({[this.HostInstance.options.name]:s})),s&&"remotesInfo"in s&&!n.getInfoWithoutType(s.remotesInfo,t.name).value&&("version"in t||"entry"in t)&&(s.remotesInfo=r._extends({},s==null?void 0:s.remotesInfo,{[t.name]:{matchedVersion:"version"in t?t.version:t.entry}}));const{hostGlobalSnapshot:a,remoteSnapshot:d,globalSnapshot:u}=this.getGlobalRemoteInfo(t),{remoteSnapshot:c,globalSnapshot:y}=await this.hooks.lifecycle.loadSnapshot.emit({options:o,moduleInfo:t,hostGlobalSnapshot:a,remoteSnapshot:d,globalSnapshot:u});if(c)if(i.isManifestProvider(c)){const g=i.isBrowserEnv()?c.remoteEntry:c.ssrRemoteEntry||c.remoteEntry||"",S=await this.getManifestJson(g,t,{}),T=n.setGlobalSnapshotInfoByModuleInfo(r._extends({},t,{entry:g}),S);return{remoteSnapshot:S,globalSnapshot:T}}else{const{remoteSnapshot:g}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:t,remoteSnapshot:c,from:"global"});return{remoteSnapshot:g,globalSnapshot:y}}else if(n.isRemoteInfoWithEntry(t)){const g=await this.getManifestJson(t.entry,t,{}),S=n.setGlobalSnapshotInfoByModuleInfo(t,g),{remoteSnapshot:T}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:t,remoteSnapshot:g,from:"global"});return{remoteSnapshot:T,globalSnapshot:S}}else n.error(`
          Cannot get remoteSnapshot with the name: '${t.name}', version: '${t.version}' from __FEDERATION__.moduleInfo. The following reasons may be causing the problem:

          1. The Deploy platform did not deliver the correct data. You can use __FEDERATION__.moduleInfo to check the remoteInfo.

          2. The remote '${t.name}' version '${t.version}' is not released.

          The transformed module info: ${JSON.stringify(y)}
        `)}getGlobalRemoteInfo(t){return ie(t,this.HostInstance)}async getManifestJson(t,o,s){const a=async()=>{let u=this.manifestCache.get(t);if(u)return u;try{let c=await this.loaderHook.lifecycle.fetch.emit(t,{});return(!c||!(c instanceof Response))&&(c=await fetch(t,{})),u=await c.json(),n.assert(u.metaData&&u.exposes&&u.shared,`${t} is not a federation manifest`),this.manifestCache.set(t,u),u}catch(c){delete this.manifestLoading[t],n.error(`Failed to get manifestJson for ${o.name}. The manifest URL is ${t}. Please ensure that the manifestUrl is accessible.
          
 Error message:
          
 ${c}`)}},d=async()=>{const u=await a(),c=i.generateSnapshotFromManifest(u,{version:t}),{remoteSnapshot:y}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:o,manifestJson:u,remoteSnapshot:c,manifestUrl:t,from:"manifest"});return y};return this.manifestLoading[t]||(this.manifestLoading[t]=d().then(u=>u)),this.manifestLoading[t]}constructor(t){this.loadingHostSnapshot=null,this.manifestCache=new Map,this.hooks=new P({beforeLoadRemoteSnapshot:new H("beforeLoadRemoteSnapshot"),loadSnapshot:new V("loadGlobalSnapshot"),loadRemoteSnapshot:new V("loadRemoteSnapshot")}),this.manifestLoading=n.Global.__FEDERATION__.__MANIFEST_LOADING__,this.HostInstance=t,this.loaderHook=t.loaderHook}}class de{registerShared(t,o){const{shareInfos:s,shared:a}=n.formatShareConfigs(t,o);return Object.keys(s).forEach(u=>{s[u].forEach(y=>{!n.getRegisteredShare(this.shareScopeMap,u,y,this.hooks.lifecycle.resolveShare)&&y&&y.lib&&this.setShared({pkgName:u,lib:y.lib,get:y.get,loaded:!0,shared:y,from:o.name})})}),{shareInfos:s,shared:a}}async loadShare(t,o){const{host:s}=this,a=n.getTargetSharedOptions({pkgName:t,extraOptions:o,shareInfos:s.options.shared});a!=null&&a.scope&&await Promise.all(a.scope.map(async g=>{await Promise.all(this.initializeSharing(g,{strategy:a.strategy}))}));const d=await this.hooks.lifecycle.beforeLoadShare.emit({pkgName:t,shareInfo:a,shared:s.options.shared,origin:s}),{shareInfo:u}=d;n.assert(u,`Cannot find ${t} Share in the ${s.options.name}. Please ensure that the ${t} Share parameters have been injected`);const c=n.getRegisteredShare(this.shareScopeMap,t,u,this.hooks.lifecycle.resolveShare),y=g=>{g.useIn||(g.useIn=[]),n.addUniqueItem(g.useIn,s.options.name)};if(c&&c.lib)return y(c),c.lib;if(c&&c.loading&&!c.loaded){const g=await c.loading;return c.loaded=!0,c.lib||(c.lib=g),y(c),g}else if(c){const S=(async()=>{const T=await c.get();u.lib=T,u.loaded=!0,y(u);const R=n.getRegisteredShare(this.shareScopeMap,t,u,this.hooks.lifecycle.resolveShare);return R&&(R.lib=T,R.loaded=!0),T})();return this.setShared({pkgName:t,loaded:!1,shared:c,from:s.options.name,lib:null,loading:S}),S}else{if(o!=null&&o.customShareInfo)return!1;const S=(async()=>{const T=await u.get();u.lib=T,u.loaded=!0,y(u);const R=n.getRegisteredShare(this.shareScopeMap,t,u,this.hooks.lifecycle.resolveShare);return R&&(R.lib=T,R.loaded=!0),T})();return this.setShared({pkgName:t,loaded:!1,shared:u,from:s.options.name,lib:null,loading:S}),S}}initializeSharing(t=n.DEFAULT_SCOPE,o){const{host:s}=this,a=o==null?void 0:o.from,d=o==null?void 0:o.strategy;let u=o==null?void 0:o.initScope;const c=[];if(a!=="build"){const{initTokens:$}=this;u||(u=[]);let F=$[t];if(F||(F=$[t]={from:this.host.name}),u.indexOf(F)>=0)return c;u.push(F)}const y=this.shareScopeMap,g=s.options.name;y[t]||(y[t]={});const S=y[t],T=($,F)=>{var v;const{version:w,eager:j}=F;S[$]=S[$]||{};const M=S[$],x=M[w],B=!!(x&&(x.eager||(v=x.shareConfig)!=null&&v.eager));(!x||x.strategy!=="loaded-first"&&!x.loaded&&(!j!=!B?j:g>x.from))&&(M[w]=F)},R=$=>$&&$.init&&$.init(y[t],u),I=async $=>{const{module:F}=await s.remoteHandler.getRemoteModuleAndOptions({id:$});if(F.getEntry){let v;try{v=await F.getEntry()}catch(w){v=await s.remoteHandler.hooks.lifecycle.errorLoadRemote.emit({id:$,error:w,from:"runtime",lifecycle:"beforeLoadShare",origin:s})}F.inited||(await R(v),F.inited=!0)}};return Object.keys(s.options.shared).forEach($=>{s.options.shared[$].forEach(v=>{v.scope.includes(t)&&T($,v)})}),(s.options.shareStrategy==="version-first"||d==="version-first")&&s.options.remotes.forEach($=>{$.shareScope===t&&c.push(I($.name))}),c}loadShareSync(t,o){const{host:s}=this,a=n.getTargetSharedOptions({pkgName:t,extraOptions:o,shareInfos:s.options.shared});a!=null&&a.scope&&a.scope.forEach(c=>{this.initializeSharing(c,{strategy:a.strategy})});const d=n.getRegisteredShare(this.shareScopeMap,t,a,this.hooks.lifecycle.resolveShare),u=c=>{c.useIn||(c.useIn=[]),n.addUniqueItem(c.useIn,s.options.name)};if(d){if(typeof d.lib=="function")return u(d),d.loaded||(d.loaded=!0,d.from===s.options.name&&(a.loaded=!0)),d.lib;if(typeof d.get=="function"){const c=d.get();if(!(c instanceof Promise))return u(d),this.setShared({pkgName:t,loaded:!0,from:s.options.name,lib:c,shared:d}),c}}if(a.lib)return a.loaded||(a.loaded=!0),a.lib;if(a.get){const c=a.get();if(c instanceof Promise)throw new Error(`
        The loadShareSync function was unable to load ${t}. The ${t} could not be found in ${s.options.name}.
        Possible reasons for failure: 

        1. The ${t} share was registered with the 'get' attribute, but loadShare was not used beforehand.

        2. The ${t} share was not registered with the 'lib' attribute.

      `);return a.lib=c,this.setShared({pkgName:t,loaded:!0,from:s.options.name,lib:a.lib,shared:a}),a.lib}throw new Error(`
        The loadShareSync function was unable to load ${t}. The ${t} could not be found in ${s.options.name}.
        Possible reasons for failure: 

        1. The ${t} share was registered with the 'get' attribute, but loadShare was not used beforehand.

        2. The ${t} share was not registered with the 'lib' attribute.

      `)}initShareScopeMap(t,o,s={}){const{host:a}=this;this.shareScopeMap[t]=o,this.hooks.lifecycle.initContainerShareScopeMap.emit({shareScope:o,options:a.options,origin:a,scopeName:t,hostShareScopeMap:s.hostShareScopeMap})}setShared({pkgName:t,shared:o,from:s,lib:a,loading:d,loaded:u,get:c}){const{version:y,scope:g="default"}=o,S=r._object_without_properties_loose(o,["version","scope"]);(Array.isArray(g)?g:[g]).forEach(R=>{if(this.shareScopeMap[R]||(this.shareScopeMap[R]={}),this.shareScopeMap[R][t]||(this.shareScopeMap[R][t]={}),!this.shareScopeMap[R][t][y]){this.shareScopeMap[R][t][y]=r._extends({version:y,scope:["default"]},S,{lib:a,loaded:u,loading:d}),c&&(this.shareScopeMap[R][t][y].get=c);return}const I=this.shareScopeMap[R][t][y];d&&!I.loading&&(I.loading=d)})}_setGlobalShareScopeMap(t){const o=n.getGlobalShareScope(),s=t.id||t.name;s&&!o[s]&&(o[s]=this.shareScopeMap)}constructor(t){this.hooks=new P({afterResolve:new V("afterResolve"),beforeLoadShare:new V("beforeLoadShare"),loadShare:new H,resolveShare:new K("resolveShare"),initContainerShareScopeMap:new K("initContainerShareScopeMap")}),this.host=t,this.shareScopeMap={},this.initTokens={},this._setGlobalShareScopeMap(t.options)}}class he{formatAndRegisterRemote(t,o){return(o.remotes||[]).reduce((a,d)=>(this.registerRemote(d,a,{force:!1}),a),t.remotes)}setIdToRemoteMap(t,o){const{remote:s,expose:a}=o,{name:d,alias:u}=s;if(this.idToRemoteMap[t]={name:s.name,expose:a},u&&t.startsWith(d)){const c=t.replace(d,u);this.idToRemoteMap[c]={name:s.name,expose:a};return}if(u&&t.startsWith(u)){const c=t.replace(u,d);this.idToRemoteMap[c]={name:s.name,expose:a}}}async loadRemote(t,o){const{host:s}=this;try{const{loadFactory:a=!0}=o||{loadFactory:!0},{module:d,moduleOptions:u,remoteMatchInfo:c}=await this.getRemoteModuleAndOptions({id:t}),{pkgNameOrAlias:y,remote:g,expose:S,id:T,remoteSnapshot:R}=c,I=await d.get(T,S,o,R),$=await this.hooks.lifecycle.onLoad.emit({id:T,pkgNameOrAlias:y,expose:S,exposeModule:a?I:void 0,exposeModuleFactory:a?void 0:I,remote:g,options:u,moduleInstance:d,origin:s});return this.setIdToRemoteMap(t,c),typeof $=="function"?$:I}catch(a){const{from:d="runtime"}=o||{from:"runtime"},u=await this.hooks.lifecycle.errorLoadRemote.emit({id:t,error:a,from:d,lifecycle:"onLoad",origin:s});if(!u)throw a;return u}}async preloadRemote(t){const{host:o}=this;await this.hooks.lifecycle.beforePreloadRemote.emit({preloadOps:t,options:o.options,origin:o});const s=Q(o.options.remotes,t);await Promise.all(s.map(async a=>{const{remote:d}=a,u=z(d),{globalSnapshot:c,remoteSnapshot:y}=await o.snapshotHandler.loadRemoteSnapshotInfo(d),g=await this.hooks.lifecycle.generatePreloadAssets.emit({origin:o,preloadOptions:a,remote:d,remoteInfo:u,globalSnapshot:c,remoteSnapshot:y});g&&re(u,o,g)}))}registerRemotes(t,o){const{host:s}=this;t.forEach(a=>{this.registerRemote(a,s.options.remotes,{force:o==null?void 0:o.force})})}async getRemoteModuleAndOptions(t){const{host:o}=this,{id:s}=t;let a;try{a=await this.hooks.lifecycle.beforeRequest.emit({id:s,options:o.options,origin:o})}catch($){if(a=await this.hooks.lifecycle.errorLoadRemote.emit({id:s,options:o.options,origin:o,from:"runtime",error:$,lifecycle:"beforeRequest"}),!a)throw $}const{id:d}=a,u=l(o.options.remotes,d);n.assert(u,`
        Unable to locate ${d} in ${o.options.name}. Potential reasons for failure include:

        1. ${d} was not included in the 'remotes' parameter of ${o.options.name||"the host"}.

        2. ${d} could not be found in the 'remotes' of ${o.options.name} with either 'name' or 'alias' attributes.
        3. ${d} is not online, injected, or loaded.
        4. ${d}  cannot be accessed on the expected.
        5. The 'beforeRequest' hook was provided but did not return the correct 'remoteInfo' when attempting to load ${d}.
      `);const{remote:c}=u,y=z(c),g=await o.sharedHandler.hooks.lifecycle.afterResolve.emit(r._extends({id:d},u,{options:o.options,origin:o,remoteInfo:y})),{remote:S,expose:T}=g;n.assert(S&&T,`The 'beforeRequest' hook was executed, but it failed to return the correct 'remote' and 'expose' values while loading ${d}.`);let R=o.moduleCache.get(S.name);const I={host:o,remoteInfo:y};return R||(R=new G(I),o.moduleCache.set(S.name,R)),{module:R,moduleOptions:I,remoteMatchInfo:g}}registerRemote(t,o,s){const{host:a}=this,d=()=>{if(t.alias){const c=o.find(y=>{var g;return t.alias&&(y.name.startsWith(t.alias)||((g=y.alias)==null?void 0:g.startsWith(t.alias)))});n.assert(!c,`The alias ${t.alias} of remote ${t.name} is not allowed to be the prefix of ${c&&c.name} name or alias`)}"entry"in t&&i.isBrowserEnv()&&!t.entry.startsWith("http")&&(t.entry=new URL(t.entry,window.location.origin).href),t.shareScope||(t.shareScope=n.DEFAULT_SCOPE),t.type||(t.type=n.DEFAULT_REMOTE_TYPE)};this.hooks.lifecycle.beforeRegisterRemote.emit({remote:t,origin:a});const u=o.find(c=>c.name===t.name);if(!u)d(),o.push(t),this.hooks.lifecycle.registerRemote.emit({remote:t,origin:a});else{const c=[`The remote "${t.name}" is already registered.`,s!=null&&s.force?"Hope you have known that OVERRIDE it may have some unexpected errors":'If you want to merge the remote, you can set "force: true".'];s!=null&&s.force&&(this.removeRemote(u),d(),o.push(t),this.hooks.lifecycle.registerRemote.emit({remote:t,origin:a})),i.warn(c.join(" "))}}removeRemote(t){try{const{host:s}=this,{name:a}=t,d=s.options.remotes.findIndex(c=>c.name===a);d!==-1&&s.options.remotes.splice(d,1);const u=s.moduleCache.get(t.name);if(u){const c=u.remoteInfo,y=c.entryGlobalName;if(globalThis[y]){var o;(o=Object.getOwnPropertyDescriptor(globalThis,y))!=null&&o.configurable?delete globalThis[y]:globalThis[y]=void 0}const g=N(u.remoteInfo);n.globalLoading[g]&&delete n.globalLoading[g],s.snapshotHandler.manifestCache.delete(c.entry);let S=c.buildVersion?i.composeKeyWithSeparator(c.name,c.buildVersion):c.name;const T=globalThis.__FEDERATION__.__INSTANCES__.findIndex(I=>c.buildVersion?I.options.id===S:I.name===S);if(T!==-1){const I=globalThis.__FEDERATION__.__INSTANCES__[T];S=I.options.id||S;const $=n.getGlobalShareScope();let F=!0;const v=[];Object.keys($).forEach(w=>{const j=$[w];j&&Object.keys(j).forEach(M=>{const x=j[M];x&&Object.keys(x).forEach(B=>{const U=x[B];U&&Object.keys(U).forEach(Z=>{const C=U[Z];C&&typeof C=="object"&&C.from===c.name&&(C.loaded||C.loading?(C.useIn=C.useIn.filter(q=>q!==c.name),C.useIn.length?F=!1:v.push([w,M,B,Z])):v.push([w,M,B,Z]))})})})}),F&&(I.shareScopeMap={},delete $[S]),v.forEach(([w,j,M,x])=>{var B,U,Z;(Z=$[w])==null||(U=Z[j])==null||(B=U[M])==null||delete B[x]}),globalThis.__FEDERATION__.__INSTANCES__.splice(T,1)}const{hostGlobalSnapshot:R}=ie(t,s);if(R){const I=R&&"remotesInfo"in R&&R.remotesInfo&&n.getInfoWithoutType(R.remotesInfo,t.name).key;I&&(delete R.remotesInfo[I],n.Global.__FEDERATION__.__MANIFEST_LOADING__[I]&&delete n.Global.__FEDERATION__.__MANIFEST_LOADING__[I])}s.moduleCache.delete(t.name)}}catch(s){console.log("removeRemote fail: ",s)}}constructor(t){this.hooks=new P({beforeRegisterRemote:new K("beforeRegisterRemote"),registerRemote:new K("registerRemote"),beforeRequest:new V("beforeRequest"),onLoad:new H("onLoad"),handlePreloadModule:new D("handlePreloadModule"),errorLoadRemote:new H("errorLoadRemote"),beforePreloadRemote:new H("beforePreloadRemote"),generatePreloadAssets:new H("generatePreloadAssets"),afterPreloadRemote:new H,loadEntry:new H}),this.host=t,this.idToRemoteMap={}}}class te{initOptions(t){this.registerPlugins(t.plugins);const o=this.formatOptions(this.options,t);return this.options=o,o}async loadShare(t,o){return this.sharedHandler.loadShare(t,o)}loadShareSync(t,o){return this.sharedHandler.loadShareSync(t,o)}initializeSharing(t=n.DEFAULT_SCOPE,o){return this.sharedHandler.initializeSharing(t,o)}initRawContainer(t,o,s){const a=z({name:t,entry:o}),d=new G({host:this,remoteInfo:a});return d.remoteEntryExports=s,this.moduleCache.set(t,d),d}async loadRemote(t,o){return this.remoteHandler.loadRemote(t,o)}async preloadRemote(t){return this.remoteHandler.preloadRemote(t)}initShareScopeMap(t,o,s={}){this.sharedHandler.initShareScopeMap(t,o,s)}formatOptions(t,o){const{shared:s}=n.formatShareConfigs(t,o),{userOptions:a,options:d}=this.hooks.lifecycle.beforeInit.emit({origin:this,userOptions:o,options:t,shareInfo:s}),u=this.remoteHandler.formatAndRegisterRemote(d,a),{shared:c}=this.sharedHandler.registerShared(d,a),y=[...d.plugins];a.plugins&&a.plugins.forEach(S=>{y.includes(S)||y.push(S)});const g=r._extends({},t,o,{plugins:y,remotes:u,shared:c});return this.hooks.lifecycle.init.emit({origin:this,options:g}),g}registerPlugins(t){const o=m(t,[this.hooks,this.remoteHandler.hooks,this.sharedHandler.hooks,this.snapshotHandler.hooks,this.loaderHook]);this.options.plugins=this.options.plugins.reduce((s,a)=>(a&&s&&!s.find(d=>d.name===a.name)&&s.push(a),s),o||[])}registerRemotes(t,o){return this.remoteHandler.registerRemotes(t,o)}constructor(t){this.hooks=new P({beforeInit:new K("beforeInit"),init:new D,beforeInitContainer:new V("beforeInitContainer"),initContainer:new V("initContainer")}),this.version="0.6.10",this.moduleCache=new Map,this.loaderHook=new P({getModuleInfo:new D,createScript:new D,createLink:new D,fetch:new H});const o={id:n.getBuilderId(),name:t.name,plugins:[ae(),fe()],remotes:[],shared:{},inBrowser:i.isBrowserEnv()};this.name=t.name,this.options=o,this.snapshotHandler=new ue(this),this.sharedHandler=new de(this),this.remoteHandler=new he(this),this.shareScopeMap=this.sharedHandler.shareScopeMap,this.registerPlugins([...o.plugins,...t.plugins||[]]),this.options=this.formatOptions(o,t)}}let L=null;function pe(h){const t=n.getGlobalFederationInstance(h.name,h.version);if(t)return t.initOptions(h),L||(L=t),t;{const o=n.getGlobalFederationConstructor()||te;return L=new o(h),n.setGlobalFederationInstance(L),L}}function _e(...h){return n.assert(L,"Please call init first"),L.loadRemote.apply(L,h)}function me(...h){return n.assert(L,"Please call init first"),L.loadShare.apply(L,h)}function ye(...h){return n.assert(L,"Please call init first"),L.loadShareSync.apply(L,h)}function Ee(...h){return n.assert(L,"Please call init first"),L.preloadRemote.apply(L,h)}function ge(...h){return n.assert(L,"Please call init first"),L.registerRemotes.apply(L,h)}function be(...h){return n.assert(L,"Please call init first"),L.registerPlugins.apply(L,h)}function Se(){return L}n.setGlobalFederationConstructor(te),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(e,"loadScriptNode",{enumerable:!0,get:function(){return i.loadScriptNode}}),e.registerGlobalPlugins=n.registerGlobalPlugins,e.FederationHost=te,e.Module=G,e.getInstance=Se,e.getRemoteEntry=k,e.getRemoteInfo=z,e.init=pe,e.loadRemote=_e,e.loadShare=me,e.loadShareSync=ye,e.preloadRemote=Ee,e.registerPlugins=be,e.registerRemotes=ge})(index_cjs$1);const usedShared={},usedRemotes=[];let initResolve,initReject;const initPromise=new Promise((e,r)=>{initResolve=e,initReject=r});var vite_mf_2_host__mf_v__runtimeInit__mf_v__={initPromise,initResolve,initReject};async function init(e={}){const r=index_cjs$1.init({name:"vite-host",remotes:usedRemotes,shared:usedShared,plugins:[],shareStrategy:"version-first"});r.initShareScopeMap("default",e);try{await Promise.all(await r.initializeSharing("default",{strategy:"version-first"}))}catch(i){console.error(i)}return vite_mf_2_host__mf_v__runtimeInit__mf_v__.initResolve(r),r}function getExposes(e){if(!(e in exposesMap))throw new Error(`Module ${e} does not exist in container.`);return exposesMap[e]().then(r=>()=>r)}export{init as a,getExposes as g,index_cjs$1 as i,vite_mf_2_host__mf_v__runtimeInit__mf_v__ as v};
